<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Autores y Libros</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>
    <div id="app" class="container mt-4">
        <h2 class="text-center">Autores y Libros</h2>

        <button class="btn btn-primary" @click="abrirFormulario('autor')">Nuevo Autor</button>
        <button class="btn btn-secondary" @click="abrirFormulario('libro')">Nuevo Libro</button>

        <h3 class="mt-4">Lista de Autores</h3>
        <div v-for="autor in autores" :key="autor.idAutor" class="d-flex align-items-center p-2 border rounded">
            <span class="flex-grow-1">{{ autor.nombre }} - {{ autor.pais }}</span>
            <button class="btn btn-warning btn-sm me-2" @click="editarAutor(autor)">Editar</button>
            <button class="btn btn-danger btn-sm" @click="eliminarAutor(autor.idAutor)">Eliminar</button>
        </div>

        <h3 class="mt-4">Lista de Libros</h3>
        <div v-for="libro in libros" :key="libro.idLibro" class="d-flex align-items-center p-2 border rounded">
            <span class="flex-grow-1">{{ libro.titulo }} - {{ libro.editorial }}</span>
            <button class="btn btn-warning btn-sm me-2" @click="editarLibro(libro)">Editar</button>
            <button class="btn btn-danger btn-sm" @click="eliminarLibro(libro.idLibro)">Eliminar</button>
        </div>

        <div v-if="forms.autor.mostrar" class="mt-3 border p-3 rounded">
            <h3>{{ editandoAutor ? "Editar Autor" : "Agregar Autor" }}</h3>
            <input v-model="formAutor.nombre" class="form-control" placeholder="Nombre">
            <input v-model="formAutor.pais" class="form-control mt-2" placeholder="País">
            <button class="btn btn-success mt-2" @click="guardarAutor">Guardar</button>
            <button class="btn btn-danger mt-2" @click="cerrarFormulario('autor')">Cancelar</button>
        </div>

        <div v-if="forms.libro.mostrar" class="mt-3 border p-3 rounded">
            <h3>{{ editandoLibro ? "Editar Libro" : "Agregar Libro" }}</h3>
            <input v-model="formLibro.titulo" class="form-control" placeholder="Título">
            <input v-model="formLibro.editorial" class="form-control mt-2" placeholder="Editorial">
            <button class="btn btn-success mt-2" @click="guardarLibro">Guardar</button>
            <button class="btn btn-danger mt-2" @click="cerrarFormulario('libro')">Cancelar</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/dexie/dist/dexie.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="autor.js"></script>
    <script src="libro.js"></script>
    <script src="main.js"></script>
</body>
</html>
